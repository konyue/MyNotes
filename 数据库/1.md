## Mysql逻辑架构

1. 连接层

    1. 连接池：处理连接
    2. 线程池：处理crud任务

2. 服务层

    1. 查询接口
    2. 解析器
    3. 查询优化器
    4. 查询缓存组件（5.7版本）

3. 引擎层

    真正负责Mysql中的数据的存储、提取，堆物理服务器级别维护的底层数据执行操作

## SQL执行流程

![image-20220422212214357](https://cdn.konyue.site/image-20220422212214357.png)

由于查询缓存的命中率并不高，在8.0版本中被移除

### 解析器

进行词法分析、语法分析，生成语法树

### 优化器：

确定SQL语句的执行路径，比如根据`全表检索`，还是`索引检索`等

一条查询可以有很多种执行方式，都返回相同结果，优化器会找到最好的执行计划

1. 逻辑查询优化：SQL等价变换等
2. 物理查询优化：使用物理结构，索引等

### 执行器

执行前判断是否具有权限，具备权限进行查询，调用底层的引擎api、返回结果

![image-20220422213835034](https://cdn.konyue.site/image-20220422213835034.png)

