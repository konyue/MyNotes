# 有名管道

- 匿名管道，由于没有名字，只能用于亲缘关系的进程间通信。为了克服这个缺点，提出了有名管道(FIFO) ，也叫命名管道、FIF0文件。
- 有名管道(FIF0) 不同于匿名管道之处在于它提供了一个路径名与之关联，以FIFO的文件形式存在于文件系统中，并且其打开方式与打开一个普通文件是一样的，这样即使与FIFO 的创建进程不存在亲缘关系的进程，只要可以访问该路径，就能够彼此通过FIFO 相互通信，因此，通过FIFO 不相关的进程也能交换数据。
- 一旦打开了FIFO，就能在它上面使用与操作匿名管道和其他文件的系统调用一样的I/0系统调用了(如read()、 write()和close()) 。与管道一样，FIFO也有一个写入端和读取端，并且从管道中读取数据的顺序与写入的顺序是一样的。

# 有名管道与匿名管道的不同

1. FIFO 在文件系统中作为一个特殊文件存在，但FIFO中的内容却存放在内存中。
2. 当使用FIFO的进程退出后，FIFO文件将继续保存在文件系统中以便以后使用。
3. FIFO有名字，不相关的进程可以通过打开有名管道进行通信。

# 有名管道的使用

- 通过命令

 	`mkfifo 名字`

- 通过函数

    ```cpp
    /*
        #include <sys/types.h>
        #include <sys/stat.h>
        int mkfifo(const char *pathname, mode_t mode);
            参数
                - pathname 管道路径名
                - mode 文件权限 与open的mode一样
            返回值  成功返回0，失败返回1，设置errno
    */
    
    #include <sys/types.h>
    #include <sys/stat.h>
    #include <stdio.h>
    
    int main(int argc, char const *argv[])
    {
        int ret = mkfifo("test", 0777);
        if(ret == -1){
            perror("mkfifo");
            exit(-1);
        }
        return 0;
    }
    
    ```

    

