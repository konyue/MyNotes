# 进程退出

exit() 		c库函数

_exit()		unix api



- 进程结束时会释放自己用户区数据，但内核区PCB不能由自己释放，需要由父进程释放

exit()函数会比_exit多做一些事再调用\_exit()函数

![](https://gitee.com/sakuryu/img-bed/raw/master/img/image-20220221163033600.png)

# 孤儿进程

- 父进程运行结束，但子进程还在运行（未运行结束），这样的子进程就称为孤儿进程
- 出现孤儿进程时，内核会把孤儿进程的父进程设置为init(1号进程)，而init进程会循环的wait()它的退出的子进程，这样，当一个子进程的生命周期结束时，init会释放该子进程内核
- 因此，孤儿进程并不会有什么危害

# 僵尸进程

- 进程结束时会释放自己用户区数据，但内核区PCB不能由自己释放，需要由父进程进行释放

- 进程终止时，父进程尚未回收，子进程残留资源（PCB)还存在于内核中，变成僵尸进程
- 僵尸进程不能被`kill -9 `杀死
- 导致问题：如果父进程不调用`wait()`或者` waitpid`的话，那么保留的信息不会被释放，其进程号一直被占用，但系统能够使用的进程号是有限的，如果产生大量僵尸进程，将因为没有可用的进程号而导致系统无法产生新进程，这就是僵尸进程的危害，应当避免