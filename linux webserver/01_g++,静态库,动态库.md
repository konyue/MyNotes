# GCC

编译过程

1. 预处理（由.cpp文件生成.i文件） gcc -E .cpp    (不进行任何安全性，合法性检查)
    - 展开宏定义
    - 处理预编译指令，如#if #ifdef等
    - 处理#include预编译指令，将包含的文件插入到预编译位置
    - 删除注释
    - 等

2. 编译（.i--->.s）
    - 词法分析，语法分析，语义分析等
3. 汇编
    1. 生成二进制文件，符号表
4. 链接
    1. 静态，动态库链接

# 静态库

命名

- libxxx.a   	(lib前缀，.a后缀)  (linux)
- libxxx.lib		(windows)

制作

- gcc获得.o文件

- .o文件打包 试用ar工具

    `ar rcs libxxx.a xxx.o xxx.o`

    - r	将文件插入备存文件中
    - c    建立备存文件
    - s    索引

# 动态库

命名

- libxxx.so   linux下为可执行文件
- libxxx.dll    (Windows)

制作

- gcc得到.o文件，得到**和位置无关**的代码
    - `gcc -c -fpic a.c b.c`

- gcc得到动态库
    - `gcc -shared a.o b.o -o libxxxx,so`

动态库需要配置环境变量之类一类东西，否则文件找不到路径



# 动态库与静态库的区别

- 静态库在链接时封装进程序中
- 动态库运行时调入内存，进程之间可共享，可以控制何时加载动态库
- 静态库加载速度快单耗费内存，更新，部署麻烦
- 推荐使用动态库

