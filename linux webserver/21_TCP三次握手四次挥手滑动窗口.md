# 三次握手

TCP是面向连接的单播协议

![image-20220309002218930](https://gitee.com/sakuryu/img-bed/raw/master/img/image-20220309002218930.png)

## 第一次握手

客户端给服务器发送一个$SYN$段(在 $TCP$ 标头中 $SYN$ 位字段为 **1** 的 $TCP/IP$ 数据包), 该段中也包含客户端的初始序列号$(Sequence number = J)$

> SYN是同步的缩写，SYN 段是发送到另一台计算机的 TCP 数据包，请求在它们之间建立连接

## 第二次握手

客户端给服务器响应一个$ACK$段(在 $TCP$ 标头中 $ACK$ 位字段为 **1** 的 $TCP/IP$ 数据包), 该段中使 $Acknowledgment number = K + 1$来表示确认已收到服务器的 $SYN$段$(Sequence number = K)$。

## 第三次握手

客户端给服务器响应一个$ACK$段(在 $TCP$ 标头中 $ACK$ 位字段为 **1** 的 $TCP/IP$ 数据包), 该段中使 $Acknowledgment number = K + 1$来表示确认已收到服务器的 $SYN$段$(Sequence number = K)$

# 滑动窗口

属于TCP协议的一种应用，用于网络数据传输时的流量控制，以避免拥塞的发生。该协议允许发送方在停止并等待确认前发送多个数据分组。由于发送方不必每发一个分组就停下来等待确认，因此该协议可以加速数据的传输，提高网络吞吐量。

TCP通过滑动窗口的概念来进行流量控制。设想在**发送端发送数据的速度很快而接收端接收速度却很慢**的情况下，为了保证数据不丢失，显然需要进行流量控制， 协调好通信双方的工作节奏。所谓滑动窗口，可以理解成接收端所能提供的缓冲区大小。TCP利用一个滑动的窗口来告诉发送端对它所发送的数据能提供多大的缓 冲区。由于窗口由16位bit所定义，所以接收端TCP 能**最大提供65535个字节**的缓冲。由此，可以利用窗口大小和第一个数据的序列号计算出最大可接收的数据序列号。 

滑动窗口本质上是描述接受方的TCP数据报缓冲区大小的数据，发送方根据这个数据来计算自己最多能发送多长的数据。如果发送方收到接受方的窗口大小为0的TCP数据报，那么发送方将停止发送数据，等到接受方发送窗口大小不为0的数据报的到来。 

# 四次挥手

发生在断开连接的时候，TCP连接时，建立的连接是双向的，在断开的时候需要双向断开

![image-20220309202208893](https://gitee.com/sakuryu/img-bed/raw/master/img/image-20220309202208893.png)

